<mxfile host="app.diagrams.net" modified="2022-04-14T08:20:57.952Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36" etag="ER8n-Ht9-kxIsV1fEMrg" version="16.5.6" type="github" pages="3">
  <diagram id="C47Pr9LcSbccXJIOxYJe" name="lottery数据库">
    <mxGraphModel dx="2276" dy="680" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="pIYXwf-N_aHhezidXHaR-4" value="&lt;font face=&quot;Times New Roman&quot;&gt;&lt;span style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;activity&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="370" y="20" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pIYXwf-N_aHhezidXHaR-5" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DROP TABLE &lt;/span&gt;IF &lt;span style=&quot;color: #cc7832&quot;&gt;EXISTS &lt;/span&gt;`activity`&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CREATE TABLE &lt;/span&gt;`activity` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;AUTO_INCREMENT COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;自增ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`activity_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`activity_name` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动名称&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`activity_desc` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动描述&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`begin_date_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;开始时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`end_date_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;结束时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`stock_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;库存&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`stock_surplus_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;库存剩余&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`take_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;每人可参与次数&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;抽奖策略ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`state` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动状态：1编辑、2提审、3撤审、4通过、5运行(审核通过后worker扫描状态)、6拒绝、7关闭、8开启&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`creator` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建人&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`create_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`update_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;修改时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  PRIMARY KEY &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id`&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  UNIQUE KEY &lt;/span&gt;`unique_activity_id` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;`activity_id`&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;ENGINE=InnoDB AUTO_INCREMENT=&lt;span style=&quot;color: #6897bb&quot;&gt;4 &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;CHARSET=utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE&lt;/span&gt;=utf8mb4_bin COMMENT=&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动配置&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" parent="1" vertex="1">
          <mxGeometry x="-160" y="30" width="550" height="470" as="geometry" />
        </mxCell>
        <mxCell id="0TD_xxccA5zFwojgquX4-1" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DROP TABLE &lt;/span&gt;IF &lt;span style=&quot;color: #cc7832&quot;&gt;EXISTS &lt;/span&gt;`award`&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CREATE TABLE &lt;/span&gt;`award` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;AUTO_INCREMENT COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;自增ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_id` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_type` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;4&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品类型（1:文字描述、2:兑换码、3:优惠券、4:实物奖品）&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_name` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品名称&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_content` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品内容「文字描述、Key、码」&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`create_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`update_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;更新时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  PRIMARY KEY &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id`&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  UNIQUE KEY &lt;/span&gt;`idx_award_id` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;`award_id`&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;ENGINE=InnoDB AUTO_INCREMENT=&lt;span style=&quot;color: #6897bb&quot;&gt;6 &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;CHARSET=utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE&lt;/span&gt;=utf8mb4_bin COMMENT=&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品配置&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" parent="1" vertex="1">
          <mxGeometry x="-200" y="500" width="550" height="310" as="geometry" />
        </mxCell>
        <mxCell id="0TD_xxccA5zFwojgquX4-2" value="&lt;font face=&quot;Times New Roman&quot;&gt;&lt;span style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;award&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="380" y="480" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0TD_xxccA5zFwojgquX4-3" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DROP TABLE &lt;/span&gt;IF &lt;span style=&quot;color: #cc7832&quot;&gt;EXISTS &lt;/span&gt;`strategy`&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CREATE TABLE &lt;/span&gt;`strategy` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;AUTO_INCREMENT COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;自增ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_desc` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略描述&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_mode` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略方式（1:单项概率、2:总体概率）&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`grant_type` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;发放奖品方式（1:即时、2:定时[含活动结束]、3:人工）&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`grant_date` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;发放奖品时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`ext_info` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;扩展信息&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`create_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`update_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;修改时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  PRIMARY KEY &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id`&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  UNIQUE KEY &lt;/span&gt;`strategy_strategyId_uindex` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;`strategy_id`&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;ENGINE=InnoDB AUTO_INCREMENT=&lt;span style=&quot;color: #6897bb&quot;&gt;2 &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;CHARSET=utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE&lt;/span&gt;=utf8mb4_bin COMMENT=&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略配置&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" parent="1" vertex="1">
          <mxGeometry x="-150" y="890" width="550" height="360" as="geometry" />
        </mxCell>
        <mxCell id="0TD_xxccA5zFwojgquX4-4" value="&lt;font face=&quot;Times New Roman&quot;&gt;&lt;span style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;strategy&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="330" y="870" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0TD_xxccA5zFwojgquX4-5" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DROP TABLE &lt;/span&gt;IF &lt;span style=&quot;color: #cc7832&quot;&gt;EXISTS &lt;/span&gt;`strategy_detail`&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CREATE TABLE &lt;/span&gt;`strategy_detail` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;AUTO_INCREMENT COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;自增ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_id` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_name` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_0900_ai_ci &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品描述&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品库存&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_surplus_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;0&#39; &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品剩余库存&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_rate` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;decimal&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;5&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;中奖概率&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`create_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`update_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;修改时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  PRIMARY KEY &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id`&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;ENGINE=InnoDB AUTO_INCREMENT=&lt;span style=&quot;color: #6897bb&quot;&gt;6 &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;CHARSET=utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE&lt;/span&gt;=utf8mb4_bin COMMENT=&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略明细&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" parent="1" vertex="1">
          <mxGeometry x="-140" y="1290" width="550" height="330" as="geometry" />
        </mxCell>
        <mxCell id="0TD_xxccA5zFwojgquX4-6" value="&lt;font face=&quot;Times New Roman&quot;&gt;&lt;span style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;strategy_detail&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="295" y="1260" width="130" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="fotytXlUEJIduu81VDzJ" name="lottery_01(02)">
    <mxGraphModel dx="2276" dy="680" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="18_Ub5zp_R_VWRuch75S-0" />
        <mxCell id="18_Ub5zp_R_VWRuch75S-1" parent="18_Ub5zp_R_VWRuch75S-0" />
        <mxCell id="2_thYVw-Z4bwrRJudLxq-0" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DROP TABLE &lt;/span&gt;IF &lt;span style=&quot;color: #cc7832&quot;&gt;EXISTS &lt;/span&gt;`user_strategy_export_000`&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CREATE TABLE &lt;/span&gt;`user_strategy_export_000` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;AUTO_INCREMENT COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;自增ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`u_id` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;32&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;用户ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`activity_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`order_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;32&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;订单ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_mode` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;策略方式（1:单项概率、2:总体概率）&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`grant_type` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;发放奖品方式（1:即时、2:定时[含活动结束]、3:人工）&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`grant_date` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;发奖时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`grant_state` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;4&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;发奖状态&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_id` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;发奖ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_type` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品类型（1:文字描述、2:兑换码、3:优惠券、4:实物奖品）&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_name` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品名称&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`award_content` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;奖品内容「文字描述、Key、码」&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`uuid` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;防重ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`mq_state` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;4&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;消息发送状态（0未发送、1发送成功、2发送失败）&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`create_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`update_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;更新时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  PRIMARY KEY &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id`&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  UNIQUE KEY &lt;/span&gt;`idx_uuid` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;`uuid`&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;USING &lt;/span&gt;BTREE&lt;br&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;ENGINE=InnoDB &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;CHARSET=utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE&lt;/span&gt;=utf8mb4_0900_ai_ci COMMENT=&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;用户策略计算结果表&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="-170" y="60" width="550" height="360" as="geometry" />
        </mxCell>
        <mxCell id="2_thYVw-Z4bwrRJudLxq-1" value="Text" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="400" y="340" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="2_thYVw-Z4bwrRJudLxq-2" value="Text" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="400" y="340" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="2_thYVw-Z4bwrRJudLxq-3" value="&lt;font style=&quot;font-size: 18px&quot; face=&quot;Times New Roman&quot;&gt;&lt;b&gt;分库分表：user_strategy_export_000(001-004)&lt;/b&gt;&lt;/font&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="180" y="40" width="380" height="20" as="geometry" />
        </mxCell>
        <mxCell id="2_thYVw-Z4bwrRJudLxq-4" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DROP TABLE &lt;/span&gt;IF &lt;span style=&quot;color: #cc7832&quot;&gt;EXISTS &lt;/span&gt;`user_take_activity`&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CREATE TABLE &lt;/span&gt;`user_take_activity` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;AUTO_INCREMENT COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;自增ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`u_id` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;32&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;用户ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`take_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动领取ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`activity_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`activity_name` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;64&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动名称&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`take_date` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动领取时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`take_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;领取次数&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`strategy_id` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;抽奖策略ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`state` &lt;/span&gt;tinyint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动单使用状态 0未使用、1已使用&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`uuid` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;128&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;防重ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`create_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`update_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;更新时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  PRIMARY KEY &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id`&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  UNIQUE KEY &lt;/span&gt;`idx_uuid` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;`uuid`&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;USING &lt;/span&gt;BTREE COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;防重ID&#39;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;ENGINE=InnoDB AUTO_INCREMENT=&lt;span style=&quot;color: #6897bb&quot;&gt;31 &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;CHARSET=utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE&lt;/span&gt;=utf8mb4_bin COMMENT=&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;用户参与活动记录表&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="-100" y="590" width="550" height="420" as="geometry" />
        </mxCell>
        <mxCell id="2_thYVw-Z4bwrRJudLxq-5" value="&lt;font style=&quot;font-size: 18px&quot; face=&quot;Times New Roman&quot;&gt;&lt;b&gt;分库不分表：user_take_activity&lt;/b&gt;&lt;/font&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="230" y="570" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="2_thYVw-Z4bwrRJudLxq-6" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DROP TABLE &lt;/span&gt;IF &lt;span style=&quot;color: #cc7832&quot;&gt;EXISTS &lt;/span&gt;`user_take_activity_count`&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CREATE TABLE &lt;/span&gt;`user_take_activity_count` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;NOT NULL &lt;/span&gt;AUTO_INCREMENT COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;自增ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`u_id` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;varchar&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;CHARACTER SET &lt;/span&gt;utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE &lt;/span&gt;utf8mb4_bin &lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;用户ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`activity_id` &lt;/span&gt;bigint&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;20&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;活动ID&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`total_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;总计可领次数&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`left_count` &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;11&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;剩余领取次数&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`create_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;创建时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`update_time` &lt;/span&gt;datetime&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #6897bb&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT NULL &lt;/span&gt;COMMENT &lt;span style=&quot;color: #6a8759&quot;&gt;&#39;更新时间&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  PRIMARY KEY &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;`id`&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;  UNIQUE KEY &lt;/span&gt;`idx_uId_activityId` &lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;`u_id`&lt;span style=&quot;color: #cc7832&quot;&gt;,&lt;/span&gt;`activity_id`&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;USING &lt;/span&gt;BTREE&lt;br&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) &lt;/span&gt;ENGINE=InnoDB AUTO_INCREMENT=&lt;span style=&quot;color: #6897bb&quot;&gt;4 &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;DEFAULT &lt;/span&gt;CHARSET=utf8mb4 &lt;span style=&quot;color: #cc7832&quot;&gt;COLLATE&lt;/span&gt;=utf8mb4_0900_ai_ci COMMENT=&lt;span style=&quot;color: #6a8759&quot;&gt;&#39;用户活动参与次数表&#39;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="-130" y="1030" width="550" height="310" as="geometry" />
        </mxCell>
        <mxCell id="2_thYVw-Z4bwrRJudLxq-7" value="&lt;font style=&quot;font-size: 18px&quot; face=&quot;Times New Roman&quot;&gt;&lt;b&gt;分库不分表：user_take_activity_count&lt;/b&gt;&lt;/font&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" vertex="1" parent="18_Ub5zp_R_VWRuch75S-1">
          <mxGeometry x="180" y="1010" width="320" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="7o08u_-BXNcRVJRkb-cZ" name="抽奖策略领域模块">
    <mxGraphModel dx="2276" dy="680" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="3JPE0SxEQBPPvcjDyJeV-0" />
        <mxCell id="3JPE0SxEQBPPvcjDyJeV-1" parent="3JPE0SxEQBPPvcjDyJeV-0" />
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-102" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Long &lt;span style=&quot;color: #9876aa&quot;&gt;strategyId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略配置&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;StrategyBriefVO &lt;span style=&quot;color: #9876aa&quot;&gt;strategy&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略明细&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;List&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;&amp;lt;&lt;/span&gt;StrategyDetailBriefVO&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;&amp;gt; &lt;/span&gt;&lt;span style=&quot;color: #9876aa&quot;&gt;strategyDetailList&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-300" y="80" width="550" height="360" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-103" value="&lt;b&gt;model.aggregates.StrategyRich&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-150" y="60" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-104" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 用户ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;uId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Long &lt;span style=&quot;color: #9876aa&quot;&gt;strategyId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 防重ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;uuid&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-290" y="470" width="260" height="360" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-105" value="&lt;b&gt;model.req.DrawReq&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-255" y="440" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-106" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 用户ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;uId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Long &lt;span style=&quot;color: #9876aa&quot;&gt;strategyId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 中奖状态：0未中奖、1已中奖、2兜底奖 Constants.DrawState&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;drawState &lt;/span&gt;= Constants.DrawState.&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;FAIL&lt;/span&gt;.getCode&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 中奖奖品信息&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;DrawAwardVO &lt;span style=&quot;color: #9876aa&quot;&gt;drawAwardInfo&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="250" y="410" width="550" height="470" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-107" value="&lt;b&gt;model.res.DrawResult&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="465" y="390" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-108" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/** 奖品ID */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/** 奖品类型（1:文字描述、2:兑换码、3:优惠券、4:实物奖品） */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;awardType&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/** 奖品名称 */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardName&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/** 奖品内容「描述、奖品码、sku」 */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardContent&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-390" y="840" width="550" height="290" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-109" value="&lt;b&gt;model.vo.AwardBriefVO&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-285" y="830" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-110" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 中奖概率&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;BigDecimal &lt;span style=&quot;color: #9876aa&quot;&gt;awardRate&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-320" y="1100" width="300" height="250" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-111" value="&lt;b&gt;model.vo.AwardRateVO&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-270" y="1090" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-112" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 用户ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;uId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品类型（1:文字描述、2:兑换码、3:优惠券、4:实物奖品）&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;awardType&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品名称&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardName&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品内容「描述、奖品码、sku」&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardContent&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略方式（1:单项概率、2:总体概率）&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;strategyMode&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 发放奖品方式（1:即时、2:定时[含活动结束]、3:人工）&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;grantType&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 发奖时间&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Date &lt;span style=&quot;color: #9876aa&quot;&gt;grantDate&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="190" y="840" width="500" height="880" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-113" value="&lt;b&gt;model.vo.DrawAwardVO&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="310" y="830" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-114" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Long &lt;span style=&quot;color: #9876aa&quot;&gt;strategyId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略描述&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;strategyDesc&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略方式「1:单项概率、2:总体概率」&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;strategyMode&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 发放奖品方式「1:即时、2:定时[含活动结束]、3:人工」&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;grantType&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 发放奖品时间&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Date &lt;span style=&quot;color: #9876aa&quot;&gt;grantDate&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 扩展信息&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;extInfo&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="720" y="840" width="470" height="690" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-115" value="&lt;b&gt;model.vo.StrategyBriefVO&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="835" y="830" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-116" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 策略ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Long &lt;span style=&quot;color: #9876aa&quot;&gt;strategyId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品ID&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardId&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品名称&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;String &lt;span style=&quot;color: #9876aa&quot;&gt;awardName&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品库存&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;awardCount&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 奖品剩余库存&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;Integer &lt;span style=&quot;color: #9876aa&quot;&gt;awardSurplusCount&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; * 中奖概率&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #629755 ; font-style: italic&quot;&gt; */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;BigDecimal &lt;span style=&quot;color: #9876aa&quot;&gt;awardRate&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="1230" y="840" width="350" height="690" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-117" value="&lt;b&gt;model.vo.StrategyDetailBriefVO&lt;/b&gt;" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;fontFamily=Times New Roman;fontSize=18;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="1260" y="830" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-118" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;public &lt;/span&gt;DrawResult &lt;span style=&quot;color: #ffc66d&quot;&gt;doDrawExec&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;DrawReq req&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;) {&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;// 1. 获取抽奖策略&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;    &lt;/span&gt;StrategyRich strategyRich = &lt;span style=&quot;color: #cc7832&quot;&gt;super&lt;/span&gt;.queryStrategyRich&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;req.getStrategyId&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;())&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    &lt;/span&gt;StrategyBriefVO strategy = strategyRich.getStrategy&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;// 2. 校验抽奖策略是否已经初始化到内存&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;this&lt;/span&gt;.checkAndInitRateData&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;req.getStrategyId&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;strategy.getStrategyMode&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;strategyRich.getStrategyDetailList&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;())&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;// 3. 获取不在抽奖范围内的列表，包括：奖品库存为空、风控策略、临时调整等&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;    &lt;/span&gt;List&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;&amp;lt;&lt;/span&gt;String&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;&amp;gt; &lt;/span&gt;excludeAwardIds = &lt;span style=&quot;color: #cc7832&quot;&gt;this&lt;/span&gt;.queryExcludeAwardIds&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;req.getStrategyId&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;())&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;// 4. 执行抽奖算法&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;    &lt;/span&gt;String awardId = &lt;span style=&quot;color: #cc7832&quot;&gt;this&lt;/span&gt;.drawAlgorithm&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;req.getStrategyId&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;drawAlgorithmGroup&lt;/span&gt;.get&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;strategy.getStrategyMode&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;())&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;excludeAwardIds&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;// 5. 包装中奖结果&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #808080&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;return &lt;/span&gt;buildDrawResult&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;(&lt;/span&gt;req.getuId&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;req.getStrategyId&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;()&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;awardId&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;strategy&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-285" y="1700" width="550" height="420" as="geometry" />
        </mxCell>
        <mxCell id="KZvZXNLu5mjWPq6Wtvx6-119" value="&lt;pre style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 12pt&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;abstract class AbstractDrawBase extends DrawStrategySupport implements IDrawExec&lt;/span&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=18;fontFamily=Times New Roman;" vertex="1" parent="3JPE0SxEQBPPvcjDyJeV-1">
          <mxGeometry x="-125" y="1670" width="550" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
